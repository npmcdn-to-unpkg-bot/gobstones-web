{"version":3,"sources":["scripts/parser.js"],"names":[],"mappings":";;;;;;IAAM,M;AACJ,oBAAc;AAAA;;AAAA,gCAKR,OAAO,aALC;AAAA,QAEV,MAFU,yBAEV,MAFU;AAAA,QAEF,WAFE,yBAEF,WAFE;AAAA,QAEkB,KAFlB,yBAEW,KAFX;AAAA,QAGF,OAHE,yBAGV,MAHU;AAAA,QAGe,OAHf,yBAGM,OAHN;AAAA,QAID,OAJC,yBAIV,OAJU;;;AAOZ,SAAK,OAAL,GAAe,OAAf;AACA,SAAK,OAAL,GAAe,QAAQ,OAAR,EAAgB,IAAI,KAAJ,EAAhB,EAA6B,MAA7B,EAAqC,WAArC,CAAf;AACD;;;;0BAEK,U,EAAY;AAChB,aAAO,KAAK,OAAL,CAAa,YAAb,CAA0B,UAA1B,CAAP;AACD;;;8BAES,G,EAAK,Y,EAAc;AAC3B,UAAM,UAAU,KAAK,cAAL,CAAoB,YAApB,CAAhB;AACA,WAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,EAA4B,OAA5B;AACA,aAAO,OAAP;AACD;;;mCAEc,Y,EAAc;AAC3B,UAAM,UAAU,IAAI,KAAK,OAAT,EAAhB;AACA,cAAQ,KAAR,GAAgB,KAAhB,GAAwB,aAAa,IAAb,CAAkB,CAA1C;AACA,cAAQ,KAAR,GAAgB,KAAhB,GAAwB,aAAa,IAAb,CAAkB,CAA1C;AACA,cAAQ,IAAR;;AAEA,QAAE,MAAF,CAAS,QAAQ,KAAR,EAAT,EAA0B;AACxB,WAAG,aAAa,MAAb,CAAoB,CADC;AAExB,WAAG,aAAa,MAAb,CAAoB,CAFC;AAGxB,eAAO,aAAa;AAHI,OAA1B;;AAMA,aAAO,OAAP;AACD","file":"scripts/parser.js","sourcesContent":["class Parser {\n  constructor() {\n    const {\n      tokens, interpreter, lexer: Lexer,\n      parser: Parser, grammar: Grammar,\n      context: Context\n    } = window.gsWeblangCore;\n\n    this.Context = Context;\n    this.grammar = Grammar(Parser, new Lexer(), tokens, interpreter);\n  }\n\n  parse(sourceCode) {\n    return this.grammar.parseProgram(sourceCode);\n  }\n\n  interpret(ast, initialState) {\n    const context = this._createContext(initialState);\n    this.grammar.interpret(ast, context);\n    return context;\n  }\n\n  _createContext(initialState) {\n    const context = new this.Context();\n    context.board().sizeX = initialState.size.x;\n    context.board().sizeY = initialState.size.y;\n    context.init();\n\n    _.assign(context.board(), {\n      x: initialState.header.x,\n      y: initialState.header.y,\n      table: initialState.table\n    });\n\n    return context;\n  }\n}\n"],"sourceRoot":"/source/"}